# Factor_lib 数据管理说明

## 目录结构

```
factor_lib/
├── 📁 cache/                   # 缓存数据（按类型分类）
│   ├── combo_masks/           # 组合掩码文件 (7个文件)
│   ├── industry/              # 行业数据文件 (4个文件)
│   ├── market_data/           # 市场数据文件 (8个文件)
│   └── returns/               # 收益率数据文件 (5个文件)
├── 📁 processed/              # 处理后的因子数据
├── 📁 raw/                    # 原始因子数据
└── 📄 README.md               # 本说明文件
```

## 文件类型说明

### 1. combo_masks/ - 组合掩码
- **作用**：股票过滤掩码（新股、ST、停牌、股票池过滤的组合）
- **命名格式**：`combo_mask_{指数代码}_{开始日期}_{结束日期}.pkl`
- **示例**：`combo_mask_000985.XSHG_2015-01-05_2025-07-01.pkl`

### 2. industry/ - 行业数据
- **作用**：行业分类和市值数据
- **命名格式**：`df_industry_market_zx__{开始日期}_{结束日期}.pkl`
- **示例**：`df_industry_market_zx__2015-01-05_2025-07-01.pkl`

### 3. market_data/ - 市场数据
- **作用**：开盘价、市值等基础市场数据
- **命名格式**：
  - 开盘价：`open_{指数代码}_{开始日期}_{结束日期}.pkl`
  - 市值：`market_cap_{指数代码}_{开始日期}_{结束日期}.pkl`

### 4. returns/ - 收益率数据
- **作用**：日收益率数据
- **命名格式**：`return_1d_{指数代码}_{开始日期}_{结束日期}.pkl`
- **示例**：`return_1d_000985.XSHG_2015-01-06_2025-07-01.pkl`

## 缓存管理策略

### 自动清理规则
1. **时间过期**：超过6个月的缓存文件可以清理
2. **空间管理**：单个文件超过2GB的大文件优先清理
3. **使用频率**：长期未使用的缓存文件可以清理

### 手动清理建议
```bash
# 查看大文件（超过1GB）
find cache/ -name "*.pkl" -size +1G -ls

# 查看旧文件（超过180天）
find cache/ -name "*.pkl" -mtime +180 -ls

# 清理示例（谨慎操作）
# find cache/ -name "*.pkl" -mtime +180 -delete
```

## 注意事项

1. **不要手动删除正在使用的缓存文件**
2. **大文件清理前先确认不影响当前分析**
3. **重要的缓存文件建议备份到其他位置**
4. **定期检查磁盘空间使用情况**

## 磁盘使用统计

当前各目录大小：
- combo_masks: ~50MB (7个文件)
- industry: ~5.5GB (4个文件，包含大型行业数据)
- market_data: ~300MB (8个文件)
- returns: ~400MB (5个文件)

**总计约6.3GB的缓存数据**
